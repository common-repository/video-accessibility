(()=>{"use strict";const e=window.React,t=JSON.parse('{"apiVersion":2,"name":"video-accessibility/controls","title":"Controls","description":"Video accessibility panel controls","category":"embed","supports":{"className":false,"align":false},"attributes":{"primaryText":{"type":"string","default":"Switch to video with audio descriptions"},"secondaryText":{"type":"string","default":"Switch to video without audio descriptions"}},"usesContext":["video-accessibility/currentPanel"],"parent":["video-accessibility/block"],"editorScript":"file:index.js"}'),i=window.wp.blocks,c=window.wp.blockEditor,o=(window.wp.i18n,window.wp.data),l=window.wp.components,n=window.wp.primitives,s=(0,e.createElement)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(n.Path,{d:"M18 11.2h-5.2V6h-1.6v5.2H6v1.6h5.2V18h1.6v-5.2H18z"})),r=window.wp.element,a=window.lodash,{removeBlock:d,moveBlockToPosition:p}=(0,o.dispatch)("core/block-editor");(0,i.registerBlockType)(t.name,{...t,icon:function(){return(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"45",height:"21",viewBox:"0 0 308.25 104.28",fill:"currentColor"},(0,e.createElement)("title",null,"Audio Described"),(0,e.createElement)("g",null,(0,e.createElement)("path",{d:"m0,104.28L46.13,0h23.26l46.13,104.28h-22.46l-9.49-22.06h-51.47l-9.63,22.06H0Zm40.78-42.25h34.09l-16.98-39.04-17.11,39.04Z"}),(0,e.createElement)("path",{d:"m121.95,104.28V0h44.79c33.02,0,54.01,18.72,54.01,52.01s-21.52,52.28-54.01,52.28h-44.79Zm20.86-18.72h23.93c20.46,0,32.62-12.03,32.62-33.69s-12.17-33.16-32.62-33.16h-23.93v66.85Z"}),(0,e.createElement)("path",{d:"m214.69,104.28c13.64-13.42,22.46-33.18,22.46-53.25,0-18.91-8.82-37.82-22.46-51.03h14.44c13.5,12.89,21.53,31.8,21.53,51.03,0,20.6-8.02,40.36-21.53,53.25h-14.44Z"}),(0,e.createElement)("path",{d:"m243.49,104.28c13.64-13.42,22.46-33.18,22.46-53.25,0-18.91-8.82-37.82-22.46-51.03h14.44c13.5,12.89,21.52,31.8,21.52,51.03,0,20.6-8.02,40.36-21.52,53.25h-14.44Z"}),(0,e.createElement)("path",{d:"m272.28,104.28c13.64-13.42,22.46-33.18,22.46-53.25,0-18.91-8.82-37.82-22.46-51.03h14.44c13.5,12.89,21.53,31.8,21.53,51.03,0,20.6-8.02,40.36-21.53,53.25h-14.44Z"})))},edit:({attributes:t,setAttributes:n,clientId:m,context:h,isSelected:w,...k})=>{const[v,b]=(0,r.useState)(),{insertBlock:u}=(0,o.dispatch)("core/block-editor"),y=(0,o.useSelect)((e=>e("core/block-editor").getBlock(m))),B=(0,o.useSelect)((e=>{const t=e("core/block-editor").getBlockParentsByBlockName(m,"video-accessibility/block");return t&&t.length?e("core/block-editor").getBlock(t[0]):null})),E=B&&B.innerBlocks?B.innerBlocks.find((e=>"video-accessibility/aside"===e.name)):null,g=E&&E.innerBlocks?E.innerBlocks.find((e=>"video-accessibility/panels"===e.name)):null,f=y.innerBlocks.filter((e=>"panel"===e.attributes.control)).map((e=>e.clientId)),x=g&&g.innerBlocks?g.innerBlocks.map((e=>e.clientId)):[],S=(I=x,f.reduce(((e,t,i)=>({...e,[t]:I[i]})),{}));var I;return(0,r.useEffect)((()=>{f&&x&&v&&(Object.keys(v).filter((e=>!S[e])).map((e=>v[e])).forEach(d),Object.keys(S).map((e=>v[e])).forEach(((e,t)=>p(e,g.clientId,g.clientId,t)))),b(S)}),[(0,a.isEqual)(S,v)]),(0,e.createElement)("div",{...(0,c.useBlockProps)({className:"video-accessibility__controls"})},(0,e.createElement)(c.InnerBlocks,{allowedBlocks:["video-accessibility/control"],template:[["video-accessibility/control",{text:"Switch to video with audio description",control:"switch",switchText:"Switch to video without audio descriptions"}],["video-accessibility/control",{text:"Transcript",icon:"transcript"},[["video-accessibility/transcript"]]],["video-accessibility/control",{text:"Accessibility Statement",icon:"info"},[["video-accessibility/statement"]]]],orientation:"horizontal",templateLock:!1,renderAppender:()=>w?(0,e.createElement)("div",{className:"components-dropdown block-editor-inserter"},(0,e.createElement)(l.Button,{className:"video-accessibility__render-appender block-editor-inserter__toggle has-icon",onClick:()=>{u((0,i.createBlock)("video-accessibility/control"),y.innerBlocks.length,m,!1),u((0,i.createBlock)("video-accessibility/panel"),g.innerBlocks.length,g.clientId,!1)},icon:s})):null}))},save:()=>(0,e.createElement)("div",{...c.useBlockProps.save({className:"video-accessibility__controls"})},(0,e.createElement)(c.InnerBlocks.Content,null))})})();