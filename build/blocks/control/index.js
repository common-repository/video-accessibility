(()=>{"use strict";var e={d:(t,l)=>{for(var n in l)e.o(l,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:l[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{AudioDescribed:()=>h,Info:()=>d,Transcript:()=>p});const l=window.React,n=JSON.parse('{"apiVersion":2,"name":"video-accessibility/control","title":"Control","description":"Video accessibility panel control","category":"media","supports":{"className":false,"align":false,"color":true,"__experimentalExposeControlsToChildren":true},"attributes":{"text":{"type":"string"},"switchText":{"type":"string"},"icon":{"type":"string","enum":["","audio-described","transcript","info"]},"control":{"type":"string","enum":["panel","switch"],"default":"panel"}},"usesContext":["video-accessibility/currentMedia","video-accessibility/currentPanel"],"parent":["video-accessibility/controls"],"editorScript":"file:index.js","render":"file:render.php"}'),o=window.wp.blocks,c=window.wp.blockEditor,i=window.wp.i18n,r=window.wp.data,a=window.wp.components,s=window.wp.element;function h(){return(0,l.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"45",height:"21",viewBox:"0 0 308.25 104.28",fill:"currentColor"},(0,l.createElement)("title",null,"Audio Described"),(0,l.createElement)("g",null,(0,l.createElement)("path",{d:"m0,104.28L46.13,0h23.26l46.13,104.28h-22.46l-9.49-22.06h-51.47l-9.63,22.06H0Zm40.78-42.25h34.09l-16.98-39.04-17.11,39.04Z"}),(0,l.createElement)("path",{d:"m121.95,104.28V0h44.79c33.02,0,54.01,18.72,54.01,52.01s-21.52,52.28-54.01,52.28h-44.79Zm20.86-18.72h23.93c20.46,0,32.62-12.03,32.62-33.69s-12.17-33.16-32.62-33.16h-23.93v66.85Z"}),(0,l.createElement)("path",{d:"m214.69,104.28c13.64-13.42,22.46-33.18,22.46-53.25,0-18.91-8.82-37.82-22.46-51.03h14.44c13.5,12.89,21.53,31.8,21.53,51.03,0,20.6-8.02,40.36-21.53,53.25h-14.44Z"}),(0,l.createElement)("path",{d:"m243.49,104.28c13.64-13.42,22.46-33.18,22.46-53.25,0-18.91-8.82-37.82-22.46-51.03h14.44c13.5,12.89,21.52,31.8,21.52,51.03,0,20.6-8.02,40.36-21.52,53.25h-14.44Z"}),(0,l.createElement)("path",{d:"m272.28,104.28c13.64-13.42,22.46-33.18,22.46-53.25,0-18.91-8.82-37.82-22.46-51.03h14.44c13.5,12.89,21.53,31.8,21.53,51.03,0,20.6-8.02,40.36-21.53,53.25h-14.44Z"})))}function d(){return(0,l.createElement)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 768 768",fill:"currentColor"},(0,l.createElement)("title",null,"Information"),(0,l.createElement)("path",{d:"M415.5 288v-64.5h-63v64.5h63zM415.5 544.5v-192h-63v192h63zM384 64.5q132 0 225.75 93.75t93.75 225.75-93.75 225.75-225.75 93.75-225.75-93.75-93.75-225.75 93.75-225.75 225.75-93.75z"}))}function p(){return(0,l.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 768 768",fill:"currentColor"},(0,l.createElement)("title",null,"Transcript"),(0,l.createElement)("path",{d:"M652.5 268.5l-154.5-154.5q-18-18-45-18h-292.5q-27 0-45.75 18.75t-18.75 45.75v447q0 27 18.75 45.75t45.75 18.75h447q27 0 45.75-18.75t18.75-45.75v-292.5q0-27-19.5-46.5zM223.5 223.5h225v64.5h-225v-64.5zM544.5 544.5h-321v-64.5h321v64.5zM544.5 415.5h-321v-63h321v63z"}))}const m=window.wp.primitives,u=(0,l.createElement)(m.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,l.createElement)(m.Path,{d:"M14.103 7.128l2.26-2.26a4 4 0 00-5.207 4.804L5.828 15a2 2 0 102.828 2.828l5.329-5.328a4 4 0 004.804-5.208l-2.261 2.26-1.912-.512-.513-1.912zm-7.214 9.64a.5.5 0 11.707-.707.5.5 0 01-.707.707z"})),w=(0,l.createElement)(m.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)(m.Path,{d:"M18.7 3H5.3C4 3 3 4 3 5.3v13.4C3 20 4 21 5.3 21h13.4c1.3 0 2.3-1 2.3-2.3V5.3C21 4 20 3 18.7 3zm.8 15.7c0 .4-.4.8-.8.8H5.3c-.4 0-.8-.4-.8-.8V5.3c0-.4.4-.8.8-.8h13.4c.4 0 .8.4.8.8v13.4zM10 15l5-3-5-3v6z"})),v=(0,l.createElement)(m.SVG,{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,l.createElement)(m.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-4 14.5H6c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h8v13zm4.5-.5c0 .3-.2.5-.5.5h-2.5v-13H18c.3 0 .5.2.5.5v12z"})),b=n.attributes.icon.enum.map((e=>({value:e,label:e?e.trim().charAt(0).toUpperCase()+e.trim().slice(1).replace(/-/g," "):"No icon"})));function g(e){let t="";return"string"==typeof e&&(e.length&&(t+=e.charAt(0).toUpperCase()),e.length>1&&(t+=e.slice(1).replace(/-([a-zA-Z0-9])/g,((e,t)=>t.toUpperCase())))),t}(0,o.registerBlockType)(n.name,{...n,icon:h,edit:({attributes:e,setAttributes:n,clientId:o,context:h,isSelected:d})=>{var p;const[m,E]=(0,s.useState)(),[x,y]=(0,s.useState)(g(null!==(p=e.icon)&&void 0!==p?p:"")),C=h["video-accessibility/currentMedia"]||0,f=(0,r.useSelect)((e=>e("core/block-editor").getBlockParents(o).map((t=>e("core/block-editor").getBlock(t))))),T=f&&f.length?f[f.length-1]:null,k=T&&T.innerBlocks?T.innerBlocks.filter((e=>"panel"===e.attributes.control)).map((e=>e.clientId)).findIndex((e=>e===o)):-1,B=f.find((e=>"video-accessibility/block"===e.name));return(0,s.useEffect)((()=>{y(g(e.icon))}),[e.icon]),(0,l.createElement)(l.Fragment,null,(0,l.createElement)(c.BlockControls,null,(0,l.createElement)(a.Toolbar,{label:"Control Options"},(0,l.createElement)(a.ToolbarGroup,null,(0,l.createElement)(a.ToolbarDropdownMenu,{label:"Control Type",icon:u,controls:[{title:"Switch Video",icon:w,onClick:()=>n({control:"switch"}),isActive:"switch"===e.control},{title:"Panel",icon:v,onClick:()=>n({control:"panel"}),isActive:"panel"===e.control}]})))),(0,l.createElement)(c.InspectorControls,null,(0,l.createElement)(a.PanelBody,null,(0,l.createElement)(a.SelectControl,{label:(0,i.__)("Control","video-accessibility"),value:e.control,options:[{value:"switch",label:"Switch Video"},{value:"panel",label:"Panel"}],onChange:e=>n({control:e})}),(0,l.createElement)(a.SelectControl,{label:(0,i.__)("Icon","video-accessibility"),value:e.icon,options:b,onChange:e=>n({icon:e})}),(0,l.createElement)(a.TextControl,{label:(0,i.__)("Button Text","video-accessibility"),value:e.text,onChange:e=>n({text:e})}),"switch"===e.control&&(0,l.createElement)(a.TextControl,{label:(0,i.__)("Secondary Toggle Button Text","video-accessibility"),value:e.switchText,onChange:e=>n({switchText:e})}))),(0,l.createElement)("div",{...(0,c.useBlockProps)({className:"video-accessibility__control"})},(0,l.createElement)("button",{className:"wp-block-button__link",ref:E,onClick:()=>{"panel"===e.control&&(e=>{(0,r.dispatch)("core/block-editor").updateBlock(B.clientId,{attributes:{...B.attributes,...e}})})({currentPanel:k})}},x&&t[x]&&(0,l.createElement)(a.Icon,{icon:t[x]}),("switch"===e.control&&1===C?e.switchText:e.text)||"Panel Label...",d&&(0,l.createElement)(a.Popover,{anchor:m,className:"video-accessibility__popover",placement:"bottom"},(0,l.createElement)(a.TextControl,{label:"Button Text",value:e.text,onChange:e=>n({text:e})}),"switch"===e.control&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)(a.TextControl,{label:(0,i.__)("Secondary Toggle Button Text"),value:e.switchText,onChange:e=>n({switchText:e})}))))))},save:()=>(c.useBlockProps.save(),null)})})();